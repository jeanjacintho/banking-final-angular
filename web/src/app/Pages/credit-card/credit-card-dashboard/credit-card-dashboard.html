<div class="min-h-screen p-8 bg-[color:var(--color-background)] text-[color:var(--color-text)]">
  <div class="max-w-5xl mx-auto space-y-8">
    <h1 class="text-2xl font-bold">Your Cards</h1>

    <!-- Lista de cartões -->
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      <app-credit-card
        *ngFor="let card of cards"
        [card]="card"
        [selected]="selectedCard?.id === card.id"
        (select)="onSelectCard($event)"
      >
      </app-credit-card>
    </div>

    <!-- Resumo da fatura do cartão selecionado -->
    <section class="mt-8">
      <h2 class="text-lg font-semibold mb-3">Resumo da Fatura</h2>

      <div *ngIf="!selectedCard" class="text-sm text-[color:var(--color-text-light)]">
        Selecione um cartão para ver a fatura.
      </div>

      <div
        *ngIf="selectedCard"
        class="rounded-xl p-6 bg-[color:var(--color-card)] text-[color:var(--color-card-foreground)] border border-[color:var(--color-border)] shadow-[var(--color-shadow)]"
      >
        <div class="flex items-center justify-between mb-4">
          <div>
            <p class="text-sm text-[color:var(--color-text-light)]">Cartão</p>
            <p class="font-medium">
              {{ selectedCard.brand }} •
              {{
                selectedCard.maskedPan || '**** **** **** ' + (selectedCard.cardNumber | slice : -4)
              }}
            </p>
          </div>
          <div class="text-right">
            <p class="text-sm text-[color:var(--color-text-light)]">Fatura Atual</p>
            <p class="text-2xl font-bold text-[color:var(--color-destructive)]">
              {{ invoiceTotalBySelected | currency : 'BRL' }}
            </p>
          </div>
        </div>

        <app-invoice-summary [items]="invoiceItems" [loading]="invoiceLoading">
        </app-invoice-summary>
      </div>
    </section>

    <!-- Botão solicitar novo cartão -->
    <div class="flex justify-end">
      <a
        routerLink="/credit-card/request"
        class="inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-[color:var(--color-primary-foreground)] bg-[color:var(--color-primary)] hover:bg-[color:var(--color-primary-hover)] border border-[color:var(--color-border)] shadow-[var(--color-shadow)] transition"
      >
        <span class="text-xl leading-none">+</span>
        Solicitar novo cartão
      </a>
    </div>
  </div>
</div>
